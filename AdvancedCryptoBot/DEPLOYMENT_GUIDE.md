# Руководство по развертыванию и эксплуатации AdvancedCryptoBot

Это руководство поможет вам настроить и запустить AdvancedCryptoBot на вашем компьютере с ОС Windows, а также рассмотрит варианты для потенциального хостинга.

## 1. Требования

*   **Операционная система:** Windows (инструкция ориентирована на Windows)
*   **Python:** Версия 3.13 (как указано в задаче). Убедитесь, что Python добавлен в PATH.
*   **Редактор кода:** Visual Studio Code (рекомендуется) или любой другой текстовый редактор.
*   **Git:** Рекомендуется для получения исходного кода (можно скачать и архивом).
*   **Интернет-соединение:** Необходимо для загрузки зависимостей, получения рыночных данных и новостей.

## 2. Установка

1.  **Получение кода:**
    *   **С помощью Git (рекомендуется):**
        ```bash
        git clone <URL_репозитория_с_кодом>
        cd AdvancedCryptoBot 
        ```
    *   **Скачивание архива:** Скачайте ZIP-архив с кодом и распакуйте его в папку, например, `C:\AdvancedCryptoBot`.

2.  **Создание и активация виртуального окружения (настоятельно рекомендуется):**
    Откройте командную строку (CMD) или PowerShell в корневой папке проекта (`AdvancedCryptoBot`).
    ```bash
    python -m venv .venv
    ```
    Активируйте виртуальное окружение:
    ```bash
    .venv\Scriptsctivate
    ```
    После активации в начале командной строки появится `(.venv)`.

3.  **Установка зависимостей:**
    Убедитесь, что вы находитесь в корневой папке проекта (`AdvancedCryptoBot`) и виртуальное окружение активировано.
    ```bash
    pip install -r requirements.txt
    ```
    Это установит все необходимые библиотеки. Большинство из них (`pandas`, `numpy`, `requests`, `python-telegram-bot`, `scikit-learn`, `vaderSentiment`, `feedparser`) обычно устанавливаются без проблем. Библиотека `pandas-ta` также обычно не вызывает сложностей. Если возникнут ошибки при установке какой-либо библиотеки, поищите решение в интернете по тексту ошибки (часто это связано с отсутствием необходимых C++ Build Tools для некоторых пакетов, которые компилируются из исходников).

## 3. Конфигурация

Основные настройки бота находятся в файле `AdvancedCryptoBot/src/main_controller.py` в словаре `DEFAULT_CONFIG`.

1.  **API Ключи:**
    *   **NewsAPI:** Ключ для NewsAPI (`news_api_key`) указан в `DEFAULT_CONFIG`. В реальном приложении его следует хранить более безопасно, например, в переменных окружения (`.env` файл и библиотека `python-dotenv`).
    *   **OKX API:** Для публичных данных (история свечей) ключи обычно не требуются. Если вы захотите использовать приватные эндпоинты OKX, вам нужно будет получить API ключи от биржи и настроить их использование (текущий код не включает работу с приватными эндпоинтами OKX).

2.  **Dummy-модель:**
    Бот использует предварительно обученную модель. Для демонстрации используется "dummy" модель.
    *   Убедитесь, что файл модели `dummy_coin_usdt_1h_rf_classifier.joblib` существует в папке `AdvancedCryptoBot/models/`.
    *   Если его нет, вы можете сгенерировать его, запустив скрипт обучения модели:
        ```bash
        python AdvancedCryptoBot/src/ml_model/model_trainer.py
        ```
        Это создаст dummy-модель на основе небольшого набора случайных данных.

3.  **Лог сигналов (`signals_log.csv`):**
    Этот файл используется для логирования сгенерированных сигналов и последующего сбора обратной связи.
    *   Для инициализации файла (создания с правильными заголовками), если он еще не существует, запустите:
        ```bash
        python AdvancedCryptoBot/src/feedback_system/feedback_manager.py
        ```

4.  **Основные параметры в `DEFAULT_CONFIG` (в `main_controller.py`):**
    *   `top_n_coins`: Количество топовых монет для анализа (по умолчанию 5 для тестов).
    *   `timeframe`: Таймфрейм для анализа (например, "1H").
    *   `model_path_template`: Шаблон пути к файлу модели.
    *   `signal_config`: Параметры для генерации сигналов (порог уверенности, риск/прибыль, тип стоп-лосса и т.д.).
    *   `loop_interval_seconds`: Периодичность основного цикла работы бота в секундах.

## 4. Локальный запуск на Windows (24/7)

1.  **Простой запуск:**
    Убедитесь, что виртуальное окружение активировано.
    ```bash
    python AdvancedCryptoBot/src/main_controller.py
    ```
    Бот начнет работу. Вся информация (логи) будет выводиться в консоль. **Бот остановится, как только вы закроете это окно консоли.**

2.  **Запуск без окна консоли (`pythonw.exe`):**
    `pythonw.exe` – это версия Python для Windows, которая запускает скрипты без открытия окна консоли.
    ```bash
    pythonw AdvancedCryptoBot/src/main_controller.py
    ```
    *   **Важно:** При таком запуске вы не увидите ошибок или логов в консоли. Убедитесь, что логирование в файл настроено и работает корректно в `main_controller.py` (текущая версия использует `logging.basicConfig`, который выводит в консоль; для вывода в файл его нужно будет модифицировать).

3.  **Пакетный файл (.bat) для автоматического перезапуска:**
    Создайте файл `run_bot.bat` в корневой папке проекта со следующим содержимым (замените `C:\path	o\your\project` на ваш реальный путь к проекту):
    ```bat
    @echo off
    :start
    echo Starting Crypto Bot (%date% %time%)
    rem Активация виртуального окружения, если нужно (зависит от того, как настроен Python)
    rem C:\path	o\your\project\AdvancedCryptoBot\.venv\Scriptsctivate.bat 
    
    python C:\path	o\your\project\AdvancedCryptoBot\src\main_controller.py
    
    echo Bot process ended (%date% %time%). Restarting in 30 seconds...
    timeout /t 30 /nobreak
    goto start
    ```
    Запустите `run_bot.bat`. Этот скрипт будет автоматически перезапускать `main_controller.py`, если он по какой-то причине завершит работу.

4.  **Планировщик заданий Windows (Task Scheduler):**
    Это наиболее надежный способ для запуска 24/7 на локальной машине.
    *   Откройте "Планировщик заданий".
    *   Создайте новую простую задачу.
    *   **Триггер:** "При запуске компьютера" или "При входе в систему".
    *   **Действие:** "Запустить программу".
        *   Программа/скрипт: `python.exe` (или `pythonw.exe`).
        *   Добавить аргументы: `C:\path	o\your\project\AdvancedCryptoBot\src\main_controller.py`.
        *   Рабочая папка: `C:\path	o\your\project\AdvancedCryptoBot\src\` (или корневая папка проекта).
    *   Настройте условия (например, запускать только при наличии сетевого подключения) и параметры (например, перезапускать при сбое).

## 5. Потенциальные бесплатные хостинг-опции

Размещение AI-бота, работающего 24/7, на бесплатных хостингах сопряжено с рядом трудностей, в основном из-за ограничений ресурсов.

*   **PythonAnywhere:**
    *   **Pros:** Прост в использовании для Python-проектов. Есть бесплатный тариф с возможностью запускать скрипты по расписанию (ограниченно). Доступ к файловой системе, интернет-доступ.
    *   **Cons:** Ограничения CPU (может быть недостаточно для постоянного анализа), памяти, времени выполнения скриптов. "Always-on tasks" на бесплатном тарифе обычно не предусмотрены или сильно ограничены.

*   **Render:**
    *   **Pros:** Бесплатный тариф для веб-сервисов и "Background Workers". Поддержка Docker упрощает развертывание.
    *   **Cons:** Бесплатные инстансы "засыпают" после периода неактивности, что не подходит для iots 24/7. Ограничения CPU и памяти.

*   **Heroku:**
    *   **Pros:** (Исторически) был популярен, похож на Render.
    *   **Cons:** Большинство бесплатных тарифов были упразднены или сильно урезаны. Необходимо проверить актуальные условия.

*   **Oracle Cloud Free Tier:**
    *   **Pros:** Предлагает "Always Free" ресурсы, включая виртуальные машины (VM), которые могут работать 24/7. Более щедрые лимиты по сравнению с PaaS.
    *   **Cons:** Значительно сложнее в настройке (требуется базовое администрирование сервера Linux/Windows).

*   **Google Cloud Platform (GCP), Amazon Web Services (AWS), Microsoft Azure Free Tiers:**
    *   **Pros:** Мощные облачные платформы с бесплатными уровнями, часто включающими VM на определенный срок или с ограниченными ресурсами.
    *   **Cons:** Легко случайно превысить лимиты бесплатного тарифа и получить счет. Требуют больше знаний для настройки и управления.

*   **Общие ограничения бесплатных хостингов для AI-бота:**
    *   **Ресурсы:** CPU, RAM, дисковое пространство обычно минимальны. Это может быть критично для обработки данных и работы ML моделей.
    *   **Надежность 24/7:** Не гарантируется. Сервисы могут перезагружаться, "засыпать".
    *   **Обучение/Переобучение моделей:** Скорее всего, невозможно или непрактично на бесплатных тарифах. Эту операцию придется выполнять локально, а на хостинг загружать уже обученную модель.
    *   **Сетевые ограничения:** Могут быть ограничения на количество исходящих соединений или трафик.

**Рекомендация:** Для старта и тестирования лучше всего использовать локальный запуск на Windows. Если потребуется более надежное решение, рассмотрите Oracle Cloud Free Tier (если готовы к настройке VM) или платные тарифы специализированных Python-хостингов или VPS.

## 6. Мониторинг и Обслуживание (Кратко)

*   **Логи:** Регулярно проверяйте файлы логов (если настроен вывод в файл) на предмет ошибок и нормальной работы бота.
*   **API Лимиты:** Следите за использованием API (OKX, NewsAPI, CoinGecko), чтобы не превышать бесплатные лимиты.
*   **Обновление зависимостей:** Периодически обновляйте библиотеки (`pip install -r requirements.txt --upgrade`), но тестируйте после обновлений.
*   **Переобучение модели:** Регулярно (например, раз в неделю или месяц) собирайте обратную связь по сигналам, логируйте ее и запускайте скрипт `AdvancedCryptoBot/src/retraining/retrainer.py` для переобучения основной модели. Затем замените файл модели в `models/` на переобученный.
*   **Резервное копирование:** Делайте резервные копии кода, данных (`data/` папки) и моделей (`models/` папки).

Удачи с вашим ботом!
```
